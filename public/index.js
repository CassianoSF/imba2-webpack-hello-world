!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return p}));var{Document:i,Node:r,Text:s,Comment:o,Element:a,SVGElement:l,HTMLElement:h,DocumentFragment:u,Event:c,CustomEvent:d,MouseEvent:f,document:p}=window},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var i,r,s,o=n(0);function a(e){return e?e.toIterable?e.toIterable():e:[]}i=o.a,r={setup$(e,t){return this.__start=imba.document.createComment("start"),this.__end=imba.document.createComment("end"),this.__end.replaceWith$=function(e){return this.parentNode.insertBefore(e,this),e},this.appendChild(this.__start),this.appendChild(this.__end)},text$(e){this.__text?this.__text.textContent=e:this.__text=this.insert$(e)},insert$(e,t,n){return this.__parent?this.__parent.insert$(e,t,n||this.__end):o.b.prototype.insert$.call(this,e,t,n||this.__end)},insertInto$(e,t){return this.__parent||(this.__parent=e,e.appendChild$(this)),this},replaceWith$(e,t){this.__start.insertBeforeBegin$(e);for(var n=this.__start;n;){let e=n.nextSibling;if(this.appendChild(n),n==this.__end)break;n=e}return e},appendChild$(e){return this.__end.insertBeforeBegin$(e),e},removeChild$(e){return e.parentNode&&e.parentNode.removeChild(e),this},isEmpty$(){let e=this.__start,t=this.__end;for(;(e=e.nextSibling)&&e!=t;)if(e instanceof o.b||e instanceof o.d)return!1;return!0}},s=Object.getOwnPropertyDescriptors(r),Object.defineProperties(i.prototype,s);class l{constructor(e,t){this.__f=e,this.__parent=t,!(128&e)&&this instanceof h&&(this.__start=o.e.createComment("start"),t&&t.appendChild$(this.__start)),256&e||(this.__end=o.e.createComment("end"),t&&t.appendChild$(this.__end)),this.setup()}get parentContext(){return this.__parent}appendChild$(e,t){this.__end&&this.__parent?this.__end.insertBeforeBegin$(e):this.__parent&&this.__parent.appendChild(e)}replaceWith$(e){this.detachNodes(),this.__end.insertBeforeBegin$(e),this.__parent.removeChild(this.__end),this.__parent=null}joinBefore$(e){return this.insertInto$(e.parentNode,e)}insertInto$(e,t){return this.__parent||(this.__parent=e,t?t.insertBeforeBegin$(this.__end):e.appendChild$(this.__end),this.attachNodes()),this}setup(){return this}}class h extends l{static init$(){return super.inherited instanceof Function&&super.inherited(this)}setup(){return this.array=[],this.changes=new Map,this.dirty=!1,this.$={}}push(e,t){if(!(8&this.__f))return this.array.push(e),void this.appendChild$(e);let n=this.array[t];if(n===e);else{this.dirty=!0;let i=this.array.indexOf(e),r=this.changes.get(e);-1===i?(this.array.splice(t,0,e),this.insertChild(e,t)):i===t+1?(n&&this.changes.set(n,-1),this.array.splice(t,1)):(i>=0&&this.array.splice(i,1),this.array.splice(t,0,e),this.insertChild(e,t)),-1==r&&this.changes.delete(e)}}insertChild(e,t){if(t>0){this.array[t-1].insertAfterEnd$(e)}else this.__start?this.__start.insertAfterEnd$(e):this.__parent.insertAdjacentElement("afterbegin",e)}removeChild(e,t){e.parentNode==this.__parent&&this.__parent.removeChild(e)}attachNodes(){for(let e,t=0,n=a(this.array),i=n.length;t<i;t++)e=n[t],this.__end.insertBeforeBegin$(e)}detachNodes(){for(let e,t=0,n=a(this.array),i=n.length;t<i;t++)e=n[t],this.__parent.removeChild(e)}end$(e){var t=this;if(8&this.__f){if(this.dirty&&(this.changes.forEach((function(e,n){if(-1==e)return t.removeChild(n)})),this.changes.clear(),this.dirty=!1),this.array.length>e)for(;this.array.length>e;){let e=this.array.pop();this.removeChild(e)}}else this.__f|=8}}h.init$();class u extends l{static init$(){return super.inherited instanceof Function&&super.inherited(this)}setup(){return this.$=[],this.length=0}end$(e){let t=this.length;if(t==e||!this.__parent)return;let n=this.$,i=this.__parent;if(t>e)for(;t>e;)i.removeChild$(n[--t]);else if(e>t)for(;e>t;)this.appendChild$(n[t++]);this.length=e}attachNodes(){for(let e,t=0,n=a(this.$),i=n.length;t<i&&(e=n[t],t!=this.length);t++)this.__end.insertBeforeBegin$(e)}detachNodes(){let e=0;for(;e<this.length;){let t=this.$[e++];this.__parent.removeChild$(t)}}}function c(e,t){var n=o.e.createDocumentFragment();return n.setup$(e,t),n}function d(e,t){return new u(e,t)}function f(e,t){return new h(e,t)}u.init$()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(e,1e3/60)};class r{constructor(){var e=this;this.queue=[],this.stage=-1,this.batch=0,this.scheduled=!1,this.listeners={},this.__ticker=function(t){return e.scheduled=!1,e.tick(t)}}add(e,t){if((t||-1==this.queue.indexOf(e))&&this.queue.push(e),!this.scheduled)return this.schedule()}listen(e,t){return this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)}unlisten(e,t){return this.listeners[e]&&this.listeners[e].delete(t)}get promise(){var e=this;return new Promise((function(t){return e.add(t)}))}tick(e){var t,n=this,i=this.queue;if(this.ts||(this.ts=e),this.dt=e-this.ts,this.ts=e,this.queue=[],this.stage=1,this.batch++,i.length)for(let e,r=0,s=(t=i)?t.toIterable?t.toIterable():t:[],o=s.length;r<o;r++)e=s[r],"string"==typeof e&&this.listeners[e]?this.listeners[e].forEach((function(e){return e.tick instanceof Function?e.tick(n):e instanceof Function?e(n):void 0})):e instanceof Function?e(this.dt,this):e.tick&&e.tick(this.dt,this);return this.stage=2,this.stage=this.scheduled?0:-1,this}schedule(){return this.scheduled||(this.scheduled=!0,-1==this.stage&&(this.stage=0),i(this.__ticker)),this}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const i={esc:[27],tab:[9],enter:[13],space:[32],up:[38],down:[40],del:[8,46]};var r,s,o;r=Event,s={wait$mod:(e,t)=>new Promise((function(e){return setTimeout(e,"number"==typeof t[0]||t[0]instanceof Number?t[0]:1e3)})),sel$mod:(e,t)=>e.event.target.closest(t[0])||!1,throttle$mod({handler:e,element:t,event:n},i){if(e.throttled)return!1;e.throttled=!0;let r=i[0];"string"==typeof r||r instanceof String||(r="in-"+(n.type||"event"));let s=t.classList;return s.add(r),e.once("idle",(function(){return s.remove(r),e.throttled=!1})),!0}},o=Object.getOwnPropertyDescriptors(s),Object.defineProperties(r.prototype,o);class a{constructor(e,t){this.params=e,this.closure=t}getHandlerForMethod(e,t){return e?e[t]?e:this.getHandlerForMethod(e.parentNode,t):null}emit(e,...t){return imba.emit(this,e,t)}on(e,...t){return imba.listen(this,e,...t)}once(e,...t){return imba.once(this,e,...t)}un(e,...t){return imba.unlisten(this,e,...t)}async handleEvent(e){var t=e.target,n=e.currentTarget,r=this.params;let s=!0,o=!1;this.currentEvents||(this.currentEvents=new Set),this.currentEvents.add(e);let a={element:n,event:e,modifiers:r,handler:this};for(let h,u,c=0,d=Object.keys(r),f=d.length;c<f;c++){u=d[c],h=r[u],u.indexOf("~")>0&&(u=u.split("~")[0]);let f=[e,this],p=void 0,_=null;if(h instanceof Array){f=h.slice();for(let t,i=0,r=(l=f)?l.toIterable?l.toIterable():l:[],s=r.length;i<s;i++)if(t=r[i],"string"==typeof t&&"~"==t[0]&&"$"==t[1]){let r=t.slice(2),s=e;"$"==r[0]&&(s=s.detail,r=r.slice(1)),f[i]="el"==r&&s==e?n:"value"==r&&s==e?a.value:""==r?s:s?s[r]:null}}if("stop"==u)e.stopImmediatePropagation();else if("prevent"==u)e.preventDefault();else if("ctrl"==u){if(!e.ctrlKey)break}else if("commit"==u)s=!0;else if("silence"==u)s=!1;else if("alt"==u){if(!e.altKey)break}else if("shift"==u){if(!e.shiftKey)break}else if("meta"==u){if(!e.metaKey)break}else if("self"==u){if(t!=n)break}else if("once"==u)n.removeEventListener(e.type,this);else{if("options"==u)continue;if(i[u]){if(i[u].indexOf(e.keyCode)<0)break}else if("trigger"==u){let t=f[0],i=f[1],r=new CustomEvent(t,{bubbles:!0,detail:i});r.originalEvent=e;n.dispatchEvent(r)}else if("string"==typeof u){let t=u+"$mod";e[t]instanceof Function?(u=t,_=e,f=[a,f]):"_"==u[0]?(u=u.slice(1),_=this.closure):_=this.getHandlerForMethod(n,u)}}if(_?p=_[u].apply(_,f):u instanceof Function&&(p=u.apply(n,f)),p&&p.then instanceof Function&&(s&&imba.commit(),o=!0,p=await p),!1===p)break;a.value=p}var l;s&&imba.commit(),this.currentEvents.delete(e),0==this.currentEvents.size&&this.emit("idle")}}},function(e,t,n){"use strict";n.r(t);var i;n(6);let r=n(8);var s=0;class o extends(imba.tags.get()){incr(){return s++}render(){var e,t;return this,this.open$(),e=t=1,this.$||(e=t=0,this.$={}),e||imba.createElement("p",0,this,null,"Hello there!!",null),this.close$(t),this}}imba.tags.define("app-root",o,{}),r.mount((!(i=imba.createElement("app-root",4,null,null,null,null)).setup||i.setup(void 0),i.end$(void 0),i))},function(e,t,n){"use strict";(function(e){var t=n(3),i=n(4),r=n(1);n(7);function s(e,t){var n=Object.getOwnPropertyDescriptors(t);return Object.defineProperties(e.prototype,n),e}var o="undefined"!=typeof window?window:void 0!==e?e:null,a={version:"2.0.0",global:o,ctx:null,document:o.document};o.imba=a,o.customElements||(o.customElements={define:function(){return console.log("no custom elements")},get:function(){return console.log("no custom elements")}}),a.setTimeout=function(e,t){return setTimeout((function(){return e(),a.commit()}),t)},a.setInterval=function(e,t){return setInterval((function(){return e(),a.commit()}),t)},a.clearInterval=o.clearInterval,a.clearTimeout=o.clearTimeout,a.q$=function(e,t){return(t instanceof Element?t:document).querySelector(e)},a.q$$=function(e,t){return(t instanceof Element?t:document).querySelectorAll(e)},a.inlineStyles=function(e){var t=document.createElement("style");t.textContent=e,document.head.appendChild(t)};var l=/-./g;a.toCamelCase=function(e){return e.indexOf("-")>=0?e.replace(l,(function(e){return e.charAt(1).toUpperCase()})):e};var h=function(e,t,n){for(var i,r;(i=n)&&(n=n.next);)(r=n.listener)&&(n.path&&r[n.path]?t?r[n.path].apply(r,t):r[n.path]():t?r.apply(n,t):r.call(n)),n.times&&--n.times<=0&&(i.next=n.next,n.listener=null)};a.listen=function(e,t,n,i){var r,s,o;return(o=(s=(r=e.__listeners__||(e.__listeners__={}))[t]||(r[t]={})).tail||(s.tail=s.next={})).listener=n,o.path=i,s.tail=o.next={},o},a.once=function(e,t,n){var i=a.listen(e,t,n);return i.times=1,i},a.unlisten=function(e,t,n,i){var r,s,o=e.__listeners__;if(o&&(r=o[t]))for(;(s=r)&&(r=r.next);)if(r==n||r.listener==n){s.next=r.next,r.listener=null;break}},a.emit=function(e,t,n){var i;(i=e.__listeners__)&&(i[t]&&h(0,n,i[t]),i.all&&h(0,[t,n],i.all))},a.scheduler=new t.a,a.commit=function(){return a.scheduler.add("render")},a.tick=function(){return a.commit(),a.scheduler.promise},a.mount=function(e,t){return e.__schedule=!0,(t||document.body).appendChild(e)};const u={};a.tags=new class{constructor(){this.__types={}}lookup(e){return this.__types[e]}get(e){return e?this.__types[e]?this.__types[e]:o.customElements.get(e)||d:d}create(e){return this.__types[e]?this.__types[e].create$():document.createElement(e)}define(e,t,n){this.__types[e]=t,n&&n.extends&&(u[e]=t);let i=t.prototype;return i.render&&i.end$==Element.prototype.end$&&(i.end$=i.render),o.customElements.define(e,t),t}};var c={get(e,t){let n=e,i=void 0;for(;n&&null==i;)(n=n.parentContext)&&(i=n[t]);return i}};s(Node,{get __context(){return this.context$||(this.context$=new Proxy(this,c))},get parentContext(){return this.up$||this.parentNode},init$(){return this},replaceWith$(e){return this.parentNode.replaceChild(e,this),e},insertInto$(e){return e.appendChild$(this),this},insertBefore$(e,t){return this.insertBefore(e,t)},insertBeforeBegin$(e){return this.parentNode.insertBefore(e,this)},insertAfterEnd$(e){return this.nextSibling?this.nextSibling.insertBeforeBegin$(e):this.parentNode.appendChild(e)}}),s(Comment,{replaceWith$(e){return e&&e.joinBefore$?e.joinBefore$(this):this.parentNode.insertBefore$(e,this),this.parentNode.removeChild(this),e}}),s(Element,{emit(e,t,n={bubbles:!0}){null!=t&&(n.detail=t);let i=new CustomEvent(e,n);this.dispatchEvent(i);return i},slot$(e,t){return this},on$(e,t,n){var r,s="on$"+e;this[s]instanceof Function&&(r=this[s](t,n)),r=new i.a(t,n);var o=t.capture,a=t.passive,l=o;return a&&(l={passive:a,capture:o}),this.addEventListener(e,r,l),r},text$(e){return this.textContent=e,this},insert$(e,t,n){let i=typeof e;if("undefined"===i||null===e){if(n&&n instanceof Comment)return n;let e=document.createComment("");return n?n.replaceWith$(e):e.insertInto$(this),e}if(e===n)return e;if("object"!==i){let i,r=e;return 128&t&&256&t?void(this.textContent=r):n?n instanceof Text?(n.textContent=r,n):(i=document.createTextNode(r),n.replaceWith$(i,this),i):(this.appendChild$(i=document.createTextNode(r)),i)}return n?n.replaceWith$(e,this):e.insertInto$(this),e},flag$(e){this.className=e},flagSelf$(e){var t=this;this.flag$=function(e){return t.flagSync$(t.__extflags=e)},this.flagSelf$=function(e){return t.flagSync$(t.__ownflags=e)},this.className=(this.className||"")+" "+(this.__ownflags=e)},flagSync$(){return this.className=(this.__extflags||"")+" "+(this.__ownflags||"")},open$(){return this},close$(){return this},end$(){this.render&&this.render()},css$(e,t,n){return this.style[e]=t}}),Element.prototype.appendChild$=Element.prototype.appendChild,Element.prototype.removeChild$=Element.prototype.removeChild,Element.prototype.insertBefore$=Element.prototype.insertBefore,Element.prototype.replaceChild$=Element.prototype.replaceChild,Element.prototype.set$=Element.prototype.setAttribute,a.createLiveFragment=r.c,a.createIndexedFragment=r.a,a.createKeyedFragment=r.b;class d extends HTMLElement{static init$(){return super.inherited instanceof Function&&super.inherited(this)}constructor(){super(),this.setup$(),this.build&&this.build()}setup$(){return this.__slots={},this.__f=0}init$(){return this}slot$(e,t){var n;return"__"!=e||this.render?(n=this.__slots)[e]||(n[e]=a.createLiveFragment()):this}schedule(){return a.scheduler.listen("render",this),this.__scheduled=!0,this.tick()}unschedule(){return a.scheduler.unlisten("render",this),this.__scheduled=!1}connectedCallback(){if(this.__f||(this.__f=8,this.awaken()),this.__schedule&&this.schedule(),this.mount)return this.mount()}disconnectedCallback(){if(this.__scheduled&&this.unschedule(),this.unmount)return this.unmount()}tick(){return this.render&&this.render()}awaken(){return this.__schedule=!0}}d.init$(),o.customElements.define("imba-element",d),a.createProxyProperty=function(e){return{get:function(){return e[0]?e[0][e[1]]:void 0},set:function(t){return e[0]?e[0][e[1]]=t:null}}},a.createElement=function(e,t,n,i,r,s){var o=document.createElement(e);return(4&t||void 0===t&&null!=o.__f)&&(u[e]&&((o=u[e].create$(o)).slot$=d.prototype.slot$,o.__slots={}),o.__f=t,o.init$(),null!==r&&(o.slot$("__").text$(r),r=null)),i&&(o.className=i),s&&o.setAttribute("data-"+s,""),null!==r&&o.text$(r),n&&n instanceof Node&&o.insertInto$(n),o},a.createSVGElement=function(e,t,n,i,r,s){var o=document.createElementNS("http://www.w3.org/2000/svg",e);return i&&(o.className.baseVal=i),n&&n instanceof Node&&o.insertInto$(n),o}}).call(this,n(2))},function(e,t,n){"use strict";var i,r,s,o=n(0);i=o.c,r={flag$(e){this.className.baseVal=e},flagSelf$(e){var t=this;this.flag$=function(e){return t.flagSync$(t.__extflags=e)},this.flagSelf$=function(e){return t.flagSync$(t.__ownflags=e)},this.className.baseVal=(this.className.baseVal||"")+" "+(this.__ownflags=e)},flagSync$(){return this.className.baseVal=(this.__extflags||"")+" "+(this.__ownflags||"")}},s=Object.getOwnPropertyDescriptors(r),Object.defineProperties(i.prototype,s)},function(e,t,n){(function(e){!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1),n(7),n(8),n(9),n(10);var i=n(4);n.d(t,"createLiveFragment",(function(){return i.createLiveFragment})),n.d(t,"createIndexedFragment",(function(){return i.createIndexedFragment})),n.d(t,"createKeyedFragment",(function(){return i.createKeyedFragment}))},function(t,n,i){"use strict";i.r(n);var r=i(2),s=i(3),o=i(4);i(6);function a(e,t){var n=Object.getOwnPropertyDescriptors(t);return Object.defineProperties(e.prototype,n),e}var l="undefined"!=typeof window?window:void 0!==e?e:null,h={version:"2.0.0",global:l,ctx:null,document:l.document};l.imba=h,l.customElements||(l.customElements={define:function(){return console.log("no custom elements")},get:function(){return console.log("no custom elements")}}),h.setTimeout=function(e,t){return setTimeout((function(){return e(),h.commit()}),t)},h.setInterval=function(e,t){return setInterval((function(){return e(),h.commit()}),t)},h.clearInterval=l.clearInterval,h.clearTimeout=l.clearTimeout,h.q$=function(e,t){return(t instanceof Element?t:document).querySelector(e)},h.q$$=function(e,t){return(t instanceof Element?t:document).querySelectorAll(e)},h.inlineStyles=function(e){var t=document.createElement("style");t.textContent=e,document.head.appendChild(t)};var u=/-./g;h.toCamelCase=function(e){return e.indexOf("-")>=0?e.replace(u,(function(e){return e.charAt(1).toUpperCase()})):e};var c=function(e,t,n){for(var i,r;(i=n)&&(n=n.next);)(r=n.listener)&&(n.path&&r[n.path]?t?r[n.path].apply(r,t):r[n.path]():t?r.apply(n,t):r.call(n)),n.times&&--n.times<=0&&(i.next=n.next,n.listener=null)};h.listen=function(e,t,n,i){var r,s,o;return(o=(s=(r=e.__listeners__||(e.__listeners__={}))[t]||(r[t]={})).tail||(s.tail=s.next={})).listener=n,o.path=i,s.tail=o.next={},o},h.once=function(e,t,n){var i=h.listen(e,t,n);return i.times=1,i},h.unlisten=function(e,t,n,i){var r,s,o=e.__listeners__;if(o&&(r=o[t]))for(;(s=r)&&(r=r.next);)if(r==n||r.listener==n){s.next=r.next,r.listener=null;break}},h.emit=function(e,t,n){var i;(i=e.__listeners__)&&(i[t]&&c(0,n,i[t]),i.all&&c(0,[t,n],i.all))},h.scheduler=new r.Scheduler,h.commit=function(){return h.scheduler.add("render")},h.tick=function(){return h.commit(),h.scheduler.promise},h.mount=function(e,t){return e.__schedule=!0,(t||document.body).appendChild(e)};const d={};h.tags=new class{constructor(){this.__types={}}lookup(e){return this.__types[e]}get(e){return e?this.__types[e]?this.__types[e]:l.customElements.get(e)||p:p}create(e){return this.__types[e]?this.__types[e].create$():document.createElement(e)}define(e,t,n){this.__types[e]=t,n&&n.extends&&(d[e]=t);let i=t.prototype;return i.render&&i.end$==Element.prototype.end$&&(i.end$=i.render),l.customElements.define(e,t),t}};var f={get(e,t){let n=e,i=void 0;for(;n&&null==i;)(n=n.parentContext)&&(i=n[t]);return i}};a(Node,{get __context(){return this.context$||(this.context$=new Proxy(this,f))},get parentContext(){return this.up$||this.parentNode},init$(){return this},replaceWith$(e){return this.parentNode.replaceChild(e,this),e},insertInto$(e){return e.appendChild$(this),this},insertBefore$(e,t){return this.insertBefore(e,t)},insertBeforeBegin$(e){return this.parentNode.insertBefore(e,this)},insertAfterEnd$(e){return this.nextSibling?this.nextSibling.insertBeforeBegin$(e):this.parentNode.appendChild(e)}}),a(Comment,{replaceWith$(e){return e&&e.joinBefore$?e.joinBefore$(this):this.parentNode.insertBefore$(e,this),this.parentNode.removeChild(this),e}}),a(Element,{emit(e,t,n={bubbles:!0}){null!=t&&(n.detail=t);let i=new CustomEvent(e,n);this.dispatchEvent(i);return i},slot$(e,t){return this},on$(e,t,n){var i,r="on$"+e;this[r]instanceof Function&&(i=this[r](t,n)),i=new s.EventHandler(t,n);var o=t.capture,a=t.passive,l=o;return a&&(l={passive:a,capture:o}),this.addEventListener(e,i,l),i},text$(e){return this.textContent=e,this},insert$(e,t,n){let i=typeof e;if("undefined"===i||null===e){if(n&&n instanceof Comment)return n;let e=document.createComment("");return n?n.replaceWith$(e):e.insertInto$(this),e}if(e===n)return e;if("object"!==i){let i,r=e;return 128&t&&256&t?void(this.textContent=r):n?n instanceof Text?(n.textContent=r,n):(i=document.createTextNode(r),n.replaceWith$(i,this),i):(this.appendChild$(i=document.createTextNode(r)),i)}return n?n.replaceWith$(e,this):e.insertInto$(this),e},flag$(e){this.className=e},flagSelf$(e){var t=this;this.flag$=function(e){return t.flagSync$(t.__extflags=e)},this.flagSelf$=function(e){return t.flagSync$(t.__ownflags=e)},this.className=(this.className||"")+" "+(this.__ownflags=e)},flagSync$(){return this.className=(this.__extflags||"")+" "+(this.__ownflags||"")},open$(){return this},close$(){return this},end$(){this.render&&this.render()},css$(e,t,n){return this.style[e]=t}}),Element.prototype.appendChild$=Element.prototype.appendChild,Element.prototype.removeChild$=Element.prototype.removeChild,Element.prototype.insertBefore$=Element.prototype.insertBefore,Element.prototype.replaceChild$=Element.prototype.replaceChild,Element.prototype.set$=Element.prototype.setAttribute,h.createLiveFragment=o.createLiveFragment,h.createIndexedFragment=o.createIndexedFragment,h.createKeyedFragment=o.createKeyedFragment;class p extends HTMLElement{static init$(){return super.inherited instanceof Function&&super.inherited(this)}constructor(){super(),this.setup$(),this.build&&this.build()}setup$(){return this.__slots={},this.__f=0}init$(){return this}slot$(e,t){var n;return"__"!=e||this.render?(n=this.__slots)[e]||(n[e]=h.createLiveFragment()):this}schedule(){return h.scheduler.listen("render",this),this.__scheduled=!0,this.tick()}unschedule(){return h.scheduler.unlisten("render",this),this.__scheduled=!1}connectedCallback(){if(this.__f||(this.__f=8,this.awaken()),this.__schedule&&this.schedule(),this.mount)return this.mount()}disconnectedCallback(){if(this.__scheduled&&this.unschedule(),this.unmount)return this.unmount()}tick(){return this.render&&this.render()}awaken(){return this.__schedule=!0}}p.init$(),l.customElements.define("imba-element",p),h.createProxyProperty=function(e){return{get:function(){return e[0]?e[0][e[1]]:void 0},set:function(t){return e[0]?e[0][e[1]]=t:null}}},h.createElement=function(e,t,n,i,r,s){var o=document.createElement(e);return(4&t||void 0===t&&null!=o.__f)&&(d[e]&&((o=d[e].create$(o)).slot$=p.prototype.slot$,o.__slots={}),o.__f=t,o.init$(),null!==r&&(o.slot$("__").text$(r),r=null)),i&&(o.className=i),s&&o.setAttribute("data-"+s,""),null!==r&&o.text$(r),n&&n instanceof Node&&o.insertInto$(n),o},h.createSVGElement=function(e,t,n,i,r,s){var o=document.createElementNS("http://www.w3.org/2000/svg",e);return i&&(o.className.baseVal=i),n&&n instanceof Node&&o.insertInto$(n),o}},function(e,t,n){"use strict";n.r(t),n.d(t,"Scheduler",(function(){return r}));var i="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(e,1e3/60)};class r{constructor(){var e=this;this.queue=[],this.stage=-1,this.batch=0,this.scheduled=!1,this.listeners={},this.__ticker=function(t){return e.scheduled=!1,e.tick(t)}}add(e,t){if((t||-1==this.queue.indexOf(e))&&this.queue.push(e),!this.scheduled)return this.schedule()}listen(e,t){return this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)}unlisten(e,t){return this.listeners[e]&&this.listeners[e].delete(t)}get promise(){var e=this;return new Promise((function(t){return e.add(t)}))}tick(e){var t,n=this,i=this.queue;if(this.ts||(this.ts=e),this.dt=e-this.ts,this.ts=e,this.queue=[],this.stage=1,this.batch++,i.length)for(let e,r=0,s=(t=i)?t.toIterable?t.toIterable():t:[],o=s.length;r<o;r++)e=s[r],"string"==typeof e&&this.listeners[e]?this.listeners[e].forEach((function(e){return e.tick instanceof Function?e.tick(n):e instanceof Function?e(n):void 0})):e instanceof Function?e(this.dt,this):e.tick&&e.tick(this.dt,this);return this.stage=2,this.stage=this.scheduled?0:-1,this}schedule(){return this.scheduled||(this.scheduled=!0,-1==this.stage&&(this.stage=0),i(this.__ticker)),this}}},function(e,t,n){"use strict";n.r(t),n.d(t,"EventHandler",(function(){return a}));const i={esc:[27],tab:[9],enter:[13],space:[32],up:[38],down:[40],del:[8,46]};var r,s,o;r=Event,s={wait$mod:(e,t)=>new Promise((function(e){return setTimeout(e,"number"==typeof t[0]||t[0]instanceof Number?t[0]:1e3)})),sel$mod:(e,t)=>e.event.target.closest(t[0])||!1,throttle$mod({handler:e,element:t,event:n},i){if(e.throttled)return!1;e.throttled=!0;let r=i[0];"string"==typeof r||r instanceof String||(r="in-"+(n.type||"event"));let s=t.classList;return s.add(r),e.once("idle",(function(){return s.remove(r),e.throttled=!1})),!0}},o=Object.getOwnPropertyDescriptors(s),Object.defineProperties(r.prototype,o);class a{constructor(e,t){this.params=e,this.closure=t}getHandlerForMethod(e,t){return e?e[t]?e:this.getHandlerForMethod(e.parentNode,t):null}emit(e,...t){return imba.emit(this,e,t)}on(e,...t){return imba.listen(this,e,...t)}once(e,...t){return imba.once(this,e,...t)}un(e,...t){return imba.unlisten(this,e,...t)}async handleEvent(e){var t=e.target,n=e.currentTarget,r=this.params;let s=!0,o=!1;this.currentEvents||(this.currentEvents=new Set),this.currentEvents.add(e);let a={element:n,event:e,modifiers:r,handler:this};for(let h,u,c=0,d=Object.keys(r),f=d.length;c<f;c++){u=d[c],h=r[u],u.indexOf("~")>0&&(u=u.split("~")[0]);let f=[e,this],p=void 0,_=null;if(h instanceof Array){f=h.slice();for(let t,i=0,r=(l=f)?l.toIterable?l.toIterable():l:[],s=r.length;i<s;i++)if(t=r[i],"string"==typeof t&&"~"==t[0]&&"$"==t[1]){let r=t.slice(2),s=e;"$"==r[0]&&(s=s.detail,r=r.slice(1)),f[i]="el"==r&&s==e?n:"value"==r&&s==e?a.value:""==r?s:s?s[r]:null}}if("stop"==u)e.stopImmediatePropagation();else if("prevent"==u)e.preventDefault();else if("ctrl"==u){if(!e.ctrlKey)break}else if("commit"==u)s=!0;else if("silence"==u)s=!1;else if("alt"==u){if(!e.altKey)break}else if("shift"==u){if(!e.shiftKey)break}else if("meta"==u){if(!e.metaKey)break}else if("self"==u){if(t!=n)break}else if("once"==u)n.removeEventListener(e.type,this);else{if("options"==u)continue;if(i[u]){if(i[u].indexOf(e.keyCode)<0)break}else if("trigger"==u){let t=f[0],i=f[1],r=new CustomEvent(t,{bubbles:!0,detail:i});r.originalEvent=e;n.dispatchEvent(r)}else if("string"==typeof u){let t=u+"$mod";e[t]instanceof Function?(u=t,_=e,f=[a,f]):"_"==u[0]?(u=u.slice(1),_=this.closure):_=this.getHandlerForMethod(n,u)}}if(_?p=_[u].apply(_,f):u instanceof Function&&(p=u.apply(n,f)),p&&p.then instanceof Function&&(s&&imba.commit(),o=!0,p=await p),!1===p)break;a.value=p}var l;s&&imba.commit(),this.currentEvents.delete(e),0==this.currentEvents.size&&this.emit("idle")}}},function(e,t,n){"use strict";n.r(t),n.d(t,"createLiveFragment",(function(){return c})),n.d(t,"createIndexedFragment",(function(){return d})),n.d(t,"createKeyedFragment",(function(){return f}));var i,r,s,o=n(5);function a(e){return e?e.toIterable?e.toIterable():e:[]}i=o.DocumentFragment,r={setup$(e,t){return this.__start=imba.document.createComment("start"),this.__end=imba.document.createComment("end"),this.__end.replaceWith$=function(e){return this.parentNode.insertBefore(e,this),e},this.appendChild(this.__start),this.appendChild(this.__end)},text$(e){this.__text?this.__text.textContent=e:this.__text=this.insert$(e)},insert$(e,t,n){return this.__parent?this.__parent.insert$(e,t,n||this.__end):o.Element.prototype.insert$.call(this,e,t,n||this.__end)},insertInto$(e,t){return this.__parent||(this.__parent=e,e.appendChild$(this)),this},replaceWith$(e,t){this.__start.insertBeforeBegin$(e);for(var n=this.__start;n;){let e=n.nextSibling;if(this.appendChild(n),n==this.__end)break;n=e}return e},appendChild$(e){return this.__end.insertBeforeBegin$(e),e},removeChild$(e){return e.parentNode&&e.parentNode.removeChild(e),this},isEmpty$(){let e=this.__start,t=this.__end;for(;(e=e.nextSibling)&&e!=t;)if(e instanceof o.Element||e instanceof o.Text)return!1;return!0}},s=Object.getOwnPropertyDescriptors(r),Object.defineProperties(i.prototype,s);class l{constructor(e,t){this.__f=e,this.__parent=t,!(128&e)&&this instanceof h&&(this.__start=o.document.createComment("start"),t&&t.appendChild$(this.__start)),256&e||(this.__end=o.document.createComment("end"),t&&t.appendChild$(this.__end)),this.setup()}get parentContext(){return this.__parent}appendChild$(e,t){this.__end&&this.__parent?this.__end.insertBeforeBegin$(e):this.__parent&&this.__parent.appendChild(e)}replaceWith$(e){this.detachNodes(),this.__end.insertBeforeBegin$(e),this.__parent.removeChild(this.__end),this.__parent=null}joinBefore$(e){return this.insertInto$(e.parentNode,e)}insertInto$(e,t){return this.__parent||(this.__parent=e,t?t.insertBeforeBegin$(this.__end):e.appendChild$(this.__end),this.attachNodes()),this}setup(){return this}}class h extends l{static init$(){return super.inherited instanceof Function&&super.inherited(this)}setup(){return this.array=[],this.changes=new Map,this.dirty=!1,this.$={}}push(e,t){if(!(8&this.__f))return this.array.push(e),void this.appendChild$(e);let n=this.array[t];if(n===e);else{this.dirty=!0;let i=this.array.indexOf(e),r=this.changes.get(e);-1===i?(this.array.splice(t,0,e),this.insertChild(e,t)):i===t+1?(n&&this.changes.set(n,-1),this.array.splice(t,1)):(i>=0&&this.array.splice(i,1),this.array.splice(t,0,e),this.insertChild(e,t)),-1==r&&this.changes.delete(e)}}insertChild(e,t){if(t>0){this.array[t-1].insertAfterEnd$(e)}else this.__start?this.__start.insertAfterEnd$(e):this.__parent.insertAdjacentElement("afterbegin",e)}removeChild(e,t){e.parentNode==this.__parent&&this.__parent.removeChild(e)}attachNodes(){for(let e,t=0,n=a(this.array),i=n.length;t<i;t++)e=n[t],this.__end.insertBeforeBegin$(e)}detachNodes(){for(let e,t=0,n=a(this.array),i=n.length;t<i;t++)e=n[t],this.__parent.removeChild(e)}end$(e){var t=this;if(8&this.__f){if(this.dirty&&(this.changes.forEach((function(e,n){if(-1==e)return t.removeChild(n)})),this.changes.clear(),this.dirty=!1),this.array.length>e)for(;this.array.length>e;){let e=this.array.pop();this.removeChild(e)}}else this.__f|=8}}h.init$();class u extends l{static init$(){return super.inherited instanceof Function&&super.inherited(this)}setup(){return this.$=[],this.length=0}end$(e){let t=this.length;if(t==e||!this.__parent)return;let n=this.$,i=this.__parent;if(t>e)for(;t>e;)i.removeChild$(n[--t]);else if(e>t)for(;e>t;)this.appendChild$(n[t++]);this.length=e}attachNodes(){for(let e,t=0,n=a(this.$),i=n.length;t<i&&(e=n[t],t!=this.length);t++)this.__end.insertBeforeBegin$(e)}detachNodes(){let e=0;for(;e<this.length;){let t=this.$[e++];this.__parent.removeChild$(t)}}}function c(e,t){var n=o.document.createDocumentFragment();return n.setup$(e,t),n}function d(e,t){return new u(e,t)}function f(e,t){return new h(e,t)}u.init$()},function(e,t,n){"use strict";n.r(t),n.d(t,"Document",(function(){return i})),n.d(t,"Node",(function(){return r})),n.d(t,"Text",(function(){return s})),n.d(t,"Comment",(function(){return o})),n.d(t,"Element",(function(){return a})),n.d(t,"SVGElement",(function(){return l})),n.d(t,"HTMLElement",(function(){return h})),n.d(t,"DocumentFragment",(function(){return u})),n.d(t,"Event",(function(){return c})),n.d(t,"CustomEvent",(function(){return d})),n.d(t,"MouseEvent",(function(){return f})),n.d(t,"document",(function(){return p}));var{Document:i,Node:r,Text:s,Comment:o,Element:a,SVGElement:l,HTMLElement:h,DocumentFragment:u,Event:c,CustomEvent:d,MouseEvent:f,document:p}=window},function(e,t,n){"use strict";n.r(t);var i,r,s,o=n(5);i=o.SVGElement,r={flag$(e){this.className.baseVal=e},flagSelf$(e){var t=this;this.flag$=function(e){return t.flagSync$(t.__extflags=e)},this.flagSelf$=function(e){return t.flagSync$(t.__ownflags=e)},this.className.baseVal=(this.className.baseVal||"")+" "+(this.__ownflags=e)},flagSync$(){return this.className.baseVal=(this.__extflags||"")+" "+(this.__ownflags||"")}},s=Object.getOwnPropertyDescriptors(r),Object.defineProperties(i.prototype,s)},function(e,t){function n(e){return e?e.toIterable?e.toIterable():e:[]}function i(e,t){var n=Object.getOwnPropertyDescriptors(t);return Object.defineProperties(e.prototype,n),e}var r=function(e,t){return e instanceof Array?e.indexOf(t)>=0:e&&e.has instanceof Function?e.has(t):e&&e.contains instanceof Function?e.contains(t):e==t},s=function(e,t){return e instanceof Array?e.push(t):e&&e.add instanceof Function?e.add(t):void 0},o=function(e,t){if(e instanceof Array){let n=e.indexOf(t);if(n>=0)return e.splice(n,1)}else if(e&&e.delete instanceof Function)return e.delete(t)};i(Element,{getRichValue(){return this.value},setRichValue(e){return this.value=e},bind$(e,t){let n=t||[];return"model"==e&&(16384&this.__f||(this.__f|=16384,this.change$&&this.on$("change",{_change$:!0},this),this.input$&&this.on$("input",{capture:!0,_input$:!0},this))),Object.defineProperty(this,e,n instanceof Array?imba.createProxyProperty(n):n),n}}),Object.defineProperty(Element.prototype,"richValue",{get(){return this.getRichValue()},set(e){return this.setRichValue(e)}}),i(HTMLSelectElement,{change$(e){if(!(16384&this.__f))return;let t=this.model,i=this.__richValue;this.__richValue=void 0;let r=this.getRichValue();if(this.multiple){if(i)for(let e,s=0,a=n(i),l=a.length;s<l;s++)e=a[s],-1==r.indexOf(e)&&o(t,e);for(let e,o=0,a=n(r),l=a.length;o<l;o++)e=a[o],i&&-1!=i.indexOf(e)||s(t,e)}else this.model=r[0];return this},getRichValue(){if(this.__richValue)return this.__richValue;let e=[];for(let t,i=0,r=n(this.selectedOptions),s=r.length;i<s;i++)t=r[i],e.push(t.richValue);return this.__richValue=e},syncValue(){let e=this.model;if(this.multiple){let t=[];for(let i,s=0,o=n(this.options),a=o.length;s<a;s++){i=o[s];let n=i.richValue,a=r(e,n);i.selected=a,a&&t.push(n)}this.__richValue=t}else for(let t,i=0,r=n(this.options),s=r.length;i<s;i++){t=r[i];let n=t.richValue;if(n==e){this.__richValue=[n],this.selectedIndex=i;break}}},end$(){return this.syncValue()}}),i(HTMLOptionElement,{setRichValue(e){return this.__richValue=e,this.value=e},getRichValue(){return void 0!==this.__richValue?this.__richValue:this.value}}),i(HTMLTextAreaElement,{setRichValue(e){return this.__richValue=e,this.value=e},getRichValue(){return void 0!==this.__richValue?this.__richValue:this.value},input$(e){return this.model=this.value},end$(){return this.value=this.model}}),i(HTMLInputElement,{input$(e){if(!(16384&this.__f))return;let t=this.type;return"checkbox"!=t&&"radio"!=t?(this.__richValue=void 0,this.model=this.richValue):void 0},change$(e){if(!(16384&this.__f))return;let t=this.model,n=this.richValue;if("checkbox"==this.type||"radio"==this.type){let e=this.checked;return(i=t)instanceof Array||i&&i.has instanceof Function?e?s(t,n):o(t,n):this.model=!!e&&n}var i},setRichValue(e){return this.__richValue=e,this.value=e},getRichValue(){if(void 0!==this.__richValue)return this.__richValue;let e=this.value,t=this.type;return"range"==t||"number"==t?(e=this.valueAsNumber,Number.isNaN(e)&&(e=null)):"checkbox"==t&&(null!=e&&"on"!==e||(e=!0)),e},end$(){if(16384&this.__f)return"checkbox"==this.type||"radio"==this.type?this.checked=r(this.model,this.richValue):this.richValue=this.model}})},function(e,t){var n,i,r;n=SVGElement,i={flag$(e){this.className.baseVal=e},flagSelf$(e){var t=this;this.flag$=function(e){return t.flagSync$(t.__extflags=e)},this.flagSelf$=function(e){return t.flagSync$(t.__ownflags=e)},this.className.baseVal=(this.className.baseVal||"")+" "+(this.__ownflags=e)},flagSync$(){return this.className.baseVal=(this.__extflags||"")+" "+(this.__ownflags||"")}},r=Object.getOwnPropertyDescriptors(i),Object.defineProperties(n.prototype,r)},function(e,t){const n={};class i extends CustomEvent{static init$(){return super.inherited instanceof Function&&super.inherited(this)}in$mod(e){let t=e.event.detail.intersectionRatio,n=e.handler.lastRatio;return e.handler.lastRatio=t,!n||n<t}out$mod(e){let t=e.event.detail.intersectionRatio,n=e.handler.lastRatio;return e.handler.lastRatio=t,!t||n>t}}function r(e){return function(t){let n=[];for(let s,o=0,a=(r=t)?r.toIterable?r.toIterable():r:[],l=a.length;o<l;o++){s=a[o];let t=new i(e,{bubbles:!1,detail:s});n.push(s.target.dispatchEvent(t))}var r;return n}}i.init$(),Element.prototype.on$intersect=function(e,t){var i,s;let o;if(e.options){let t=Object.assign({event:"intersect"},e.options[0]);("string"==typeof(i=t.root)||i instanceof String)&&(t.root=document.querySelector(t.root));let n=(s=t.event,delete t.event,s);o=e.options.obs=new IntersectionObserver(r(n),t)}else o=n.intersect||(n.intersect=new IntersectionObserver(r("intersect"),{threshold:[0,1]}));return o.observe(this)}},function(e,t){var n;Element.prototype.on$selection=function(e,t){return function(){if(!n)return n=function(e){if(e.handled$)return;e.handled$=!0;let t=document.activeElement;if(t&&t.matches("input,textarea")){let e=new CustomEvent("selection",{detail:{start:t.selectionStart,end:t.selectionEnd}});return t.dispatchEvent(e)}},document.addEventListener("selectionchange",n)}()}}])}).call(this,n(2))}]);